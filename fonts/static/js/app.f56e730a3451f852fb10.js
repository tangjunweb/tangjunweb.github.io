webpackJsonp([1],{"8zzn":function(e,t){},"9oqr":function(e,t){},FoZu:function(e,t){},JtTH:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("FevL"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=a("Aizv")({name:"App"},r,!1,function(e){a("8zzn")},null,null).exports,o=a("1eSk"),l=a("UIuv"),i=a.n(l),u=a("gCy3"),c=a.n(u),d=a("BaXa"),p=a.n(d),m=a("xBUk"),f=a.n(m),g="adminCAC-token";function h(){return f.a.get(g)}var v=a("EcfS"),b={wxConfig:null,state:{token:h(),userName:""},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_USERNAME:function(e,t){e.userName=t}},actions:{Login:function(e,t){var a=e.commit;return new i.a(function(e,n){var r;(r=t,A({url:"/CAC/SignUp",method:"post",data:r})).then(function(t){var n;t.data.Success&&(n=t.data.Token,f.a.set(g,n),a("SET_TOKEN",t.data.Token)),e(t)}).catch(function(e){console.log("调用登录接口失败"),n(e)})})}}},C={token:function(e){return e.useDate.token}};n.default.use(v.a);var _=new v.a.Store({modules:{useDate:b},getters:C}),w=c.a.create({baseURL:Object({NODE_ENV:"production"}).BASE_API});w.interceptors.request.use(function(e){return _.getters.token&&(e.headers.Authorization=_.getters.token),e},function(e){i.a.reject(e)}),w.interceptors.response.use(function(e){return e},function(e){console.log(e);var t=e.response.status,a=e.response.data;return 401==t?(Object(d.Message)({message:"获取用户信息授权错误，请重新登录！",type:"error",duration:4e3}),R.push({path:"/home"})):504==t?Object(d.Message)({message:"网络错误，服务器未响应！",type:"error"}):Object(d.Message)({message:a,type:"error"}),i.a.reject(e)});var A=w;var L={data:function(){return{loading:!1,formLabelAlign:{Password:"",UserName:""},formRules:{UserName:[{required:!0,trigger:"blur",validator:function(e,t,a){t.length<1?a(new Error("请填写用户名")):a()}}],Password:[{required:!0,trigger:"blur",validator:function(e,t,a){t.length<1?a(new Error("请填写密码")):t.length<6?a(new Error("密码不能小于6位")):a()}}]}}},mounted:function(){},methods:{handleSubmit:function(){var e=this,t=this;this.$refs.ValidateForm.validate(function(a){if(!a)return!1;t.loading=!0,t.$store.dispatch("Login",t.formLabelAlign).then(function(e){t.loading=!1,e.data.Success?(t.$message.success("登录成功！"),t.$router.push({path:"/home"})):t.$message.error(e.data.Error)}).catch(function(a){t.loading=!1,e.$message({message:"登录失败: 未知的用户名或错误密码或服务器错误！",type:"error",duration:5e3})})})}}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"pageLogin"},[e._v("CAC - 登录")]),e._v(" "),a("div",{staticClass:"loginWrap"},[a("div",{staticClass:"login"},[a("h2",[e._v("活动管理平台")]),e._v(" "),a("el-form",{ref:"ValidateForm",attrs:{"label-position":"left",rules:e.formRules,model:e.formLabelAlign}},[a("el-form-item",{attrs:{prop:"UserName"}},[a("label",{staticClass:"tag",attrs:{for:""}},[e._v("用户名")]),e._v(" "),a("el-input",{model:{value:e.formLabelAlign.UserName,callback:function(t){e.$set(e.formLabelAlign,"UserName",t)},expression:"formLabelAlign.UserName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"Password"}},[a("label",{staticClass:"tag",attrs:{for:""}},[e._v("密"),a("i",{staticStyle:{display:"inline-block",width:"1em"}}),e._v("码")]),e._v(" "),a("el-input",{attrs:{type:"password"},model:{value:e.formLabelAlign.Password,callback:function(t){e.$set(e.formLabelAlign,"Password",t)},expression:"formLabelAlign.Password"}})],1),e._v(" "),a("el-form-item",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[e._v("登  录")])],1)],1)],1)])])},staticRenderFns:[]};var y=a("Aizv")(L,S,!1,function(e){a("FoZu")},null,null).exports,k={props:["allRules"],data:function(){return{showUserInfoFlag:!1,labelPosition:"right",formLabelAlign:{Company:"",VinCode:"",DateOnCard:"",ID:""},formRules:{Company:[{required:!0,message:"请填写公司名称"}],VinCode:[{required:!0,validator:function(e,t,a){t.length<1?a(new Error("请输入17位底盘号")):17!=t.replace(/\ +/g,"").length?a(new Error("请输入17位底盘号")):a()}}],DateOnCard:[{required:!0,message:"请填写上牌日期"}]}}},methods:{handleSubmit:function(){var e=this,t=this;this.$refs.ValidateForm.validate(function(a){var n;a&&(e.formLabelAlign.ID=e.allRules.ID,(n=e.formLabelAlign,A({url:"/CAC/CompleteInfor",method:"post",data:n})).then(function(e){e.data.Success?(t.$message.success("修改成功！"),t.showUserInfoFlag=!1,t.$emit("getData")):(t.$message.error(e.data.Error),t.showUserInfoFlag=!1)}))})},resetFrom:function(){this.$refs.ValidateForm&&this.$refs.ValidateForm.resetFields()}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog",attrs:{center:"true",visible:e.showUserInfoFlag},on:{"update:visible":function(t){e.showUserInfoFlag=t}}},[a("div",{staticClass:"addMsg"},[a("el-form",{ref:"ValidateForm",staticClass:"formArea",attrs:{"label-position":e.labelPosition,rules:e.formRules,model:e.formLabelAlign,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"Company",label:"公司名称"}},[a("el-input",{model:{value:e.formLabelAlign.Company,callback:function(t){e.$set(e.formLabelAlign,"Company",t)},expression:"formLabelAlign.Company"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"VinCode",label:"底盘号"}},[a("el-input",{model:{value:e.formLabelAlign.VinCode,callback:function(t){e.$set(e.formLabelAlign,"VinCode",t)},expression:"formLabelAlign.VinCode"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"DateOnCard",label:"上牌日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.formLabelAlign.DateOnCard,callback:function(t){e.$set(e.formLabelAlign,"DateOnCard",t)},expression:"formLabelAlign.DateOnCard"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center","margin-left":"-100px"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[e._v("行驶证信息提交")])],1)],1)],1)])},staticRenderFns:[]};var E={components:{addMsg:a("Aizv")(k,x,!1,function(e){a("hjlL")},null,null).exports},data:function(){return{AllRules:"",colorSet:{pasClass:"pass",notPassClass:"notPass"},pageTabs:{Page:1,PageSize:10},TotalItemCount:2,exportList:[]}},computed:{showPage:function(){return Math.ceil(this.TotalItemCount/this.pageSize)>1}},methods:{getExcel:function(){},handleCurrentChange:function(){},addMsgMsk:function(e){this.AllRules=e,this.$refs.addMsg.showUserInfoFlag=!0,this.$refs.addMsg.resetFrom()},colorRow:function(e,t){return"未通过"==e.State?this.colorSet.notPassClass:"通过"==e.State?this.colorSet.pasClass:void 0},getCustomerListData:function(){var e,t=this;(e=this.pageTabs,A({url:"/CAC/CustomerList",method:"get",params:e})).then(function(e){e.data.Success?t.exportList=e.data.Message:t.$router.push({path:"/login"})})},getdata:function(){this.getCustomerListData()}},mounted:function(){this.getCustomerListData()}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"handleDate"},[a("h2",{staticClass:"pageLogin"},[e._v("CAC - 数据处理")]),e._v(" "),a("el-row",{staticClass:"list_container"},[a("el-col",{staticClass:"export",attrs:{span:24}},[a("h2",{staticClass:"title"},[e._v("活动管理平台")]),e._v(" "),a("p",[a("el-button",{staticClass:"export_btn",attrs:{type:"primary"},on:{click:e.getExcel}},[e._v("导出列表")])],1)]),e._v(" "),a("el-col",{staticClass:"exportList",attrs:{span:24}},[a("el-table",{ref:"exportList",staticStyle:{width:"100%"},attrs:{"row-class-name":e.colorRow,data:e.exportList,stripe:"",border:"",height:"500"}},[a("el-table-column",{attrs:{prop:"SurName",align:"center",label:"姓",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Name",align:"center",label:"名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Mobile",align:"center",label:"手机号",width:""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"行驶证",width:""},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"driveImg",attrs:{src:e.row.DrivingLicense,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Time",align:"center",label:"提交时间",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Company",align:"center",label:"公司名称",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"YearLife",align:"center",label:"车辆使用年限",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"VinCode",align:"center",label:"底盘号",width:""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.State))]),e._v(" "),t.row.RefuseDetail?a("p",[e._v("("+e._s(t.row.RefuseDetail)+")")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"addMsgBtn",on:{click:function(a){e.addMsgMsk(t.row)}}},[e._v("补充信息")])]}}])})],1)],1)],1),e._v(" "),e.showPage?a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.pageTabs.Page,"page-size":e.pageTabs.PageSize,layout:"prev, pager, next, jumper",total:e.TotalItemCount},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pageTabs,"Page",t)}}})],1):e._e(),e._v(" "),a("addMsg",{ref:"addMsg",attrs:{allRules:e.AllRules},on:{getData:e.getdata}})],1)},staticRenderFns:[]};var D=a("Aizv")(E,$,!1,function(e){a("JtTH")},null,null).exports,F=a("Aizv")(null,null,!1,null,null,null).exports;n.default.use(o.a);var P=[{path:"/",redirect:"/login",hidden:!0},{path:"/login",component:y,name:"登录"},{path:"/home",component:D,name:"数据处理"},{path:"/404",component:F,hidden:!0},{path:"*",redirect:"/404",hidden:!0}],R=new o.a({scrollBehavior:function(){return{y:0}},routes:P});a("9oqr"),a("aUB8");n.default.use(p.a),n.default.config.productionTip=!1,console.log(h),R.beforeEach(function(e,t,a){e.path,a()}),new n.default({el:"#app",router:R,store:_,components:{App:s},template:"<App/>"})},aUB8:function(e,t){},hjlL:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f56e730a3451f852fb10.js.map